# Linux 常用命令

"https://www.linuxprobe.com/basic-learning-00.html"

"https://www.linuxprobe.com/basic-learning-04.html#42_Shell"

## 便捷操作

	Tab自动补全

	上下键

	ctrl+c退出选择，并且不执行当前选中的命令

## 文件和目录常用命令

### ls

	以 . 开头的文件为隐藏文件       ls -a才能显示
	 
	.代表当前目录   ..代表上一级目录（验证cd . cd ..）
	
	-a显示指定目录下所有子目录与文件，包括隐藏文件
	
	-l以列表方式显示文件的详细信息
	
	-h配合-l以人性化的方式显示文件大小  ls -l -h or ls -lh
	ls -lha

 ### 通配符使用

	*代表任意个数个字符
	
	?代表一个字符，必须是一个字符
	
	[]可以匹配字符组中的任意一个
	
	[abc]匹配a、b、c中任意一个
	
	[a-f]匹配从a到f范围内的任意一个字符

### cd

	cd切换到当前用户的主目录（/home/用户目录）
	
	cd ~切换到当前用户的主目录（/home/用户目录）
	
	cd .保持在当前目录不变
	
	cd ..切换到上级目录
	
	cd -可以在最近两次工作目录之间来回切换

#### 相对路径、绝对路径

### touch

	touch a/b/c/123.txt

### mkdir

	-p可以递归创建目录      mkdir -p a/b/c/d

### rm

	-r递归删除目录下的内容，删除文件夹时必须加此参数
	
	-f强制删除，忽略不存在的文件，无需提示



## 拷贝移动文件

### tree以树状图列出文件目录结构tree ~

	-d只显示目录

### cp(copy)

	-i覆盖文件前提示
	
	-r若给出的源文件是目录文件，则cp，将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名

### mv移动文件或重命名    

	-i覆盖文件前询问

## 查看文件内容

### cat

	-b对非空输出行编号

	-n对输出的所有行编号

### more

### grep

	-n显示匹配行和行号

	-v显示不包含匹配文本的所有行（相当于求反）

	-i忽略大小写

#### 模式查找

	^a行首，搜寻以a开头的行

	ke$行尾，搜寻以ke结束的行

### echo

### > >>

	输出>会覆盖文件原来的内容 >>表示追加，会将内容追加到已有文件的末尾


## 远程管理命令：

	shutdown 选项 时间

	shutdown -r now

	不指定选项和时间，默认1分钟后关闭电脑

		shutdown 20:25

		shutdown +10

	shutdown -c

## 系统信息相关命令

### 时间和日期

	date查看系统时间   ncal日历-y查看年日历

### 磁盘和目录空间

	df -h      disk free显示磁盘剩余空间

	du -h [目录名]    disk usage显示目录下的文件大小

### 进程信息

ps aux    查看进程详细状况process status

	a显示终端上的所有进程，包括其他用户的进程

	u显示进程的详细状态

	x显示没有控制终端的进程

top动态显示运行中的进程并且排序

kill [-9] 进程代号     终止指定代号的进程      -9强行终止

## 其他命令

### 查找文件

find [路径] -name “*.py”

### 打包压缩

#### tar.gz

tar打包

tar -cvf 打包文件.tar 被打包的文件/路径

	-c生成档案文件，创建打包文件

	-x解开档案文件

	-v列出归档解档的详细过程，显示进度

	-f指定档案文件名称，f后面一定是.tar文件，所以必须放在最后

	tar -xvf 打包文件.tar1

#### 压缩/解压缩

gzip xxx.tar.gz

tar -z可以调用gzip

	tar -zcvf 打包文件.tar.gz 被压缩的文件/路径

	tar -zxvf 打包文件.tar.gz

解压到指定路径

	tar -zxvf 打包文件.tar.gz -C 目标路径

bzip2

	xxx.tar.bz2

	tar -jcvf 打包软件.tar.bz2 被压缩的文件/路径

	tar -jxvf 打包文件.tar.bz2

### 软件安装

	apt  Advanced Packing Tool
	
	sudo apt install 软件包
	
	sudo apt remove 软件包
	
	sudo apt upgrade

### 编辑

#### vim abc.txt打开文本编辑（目标文件存在，打开编辑，不存在，新建一个文件）

	##### 切换模式：
	
	编辑模式Insert Mode 按i键
	
	命令模式Command Mode 按esc
	
	##### 退出编辑：
	
	按esc，进入命令模式
	
	输入：wq    保存并推出
	
	q     退出
	
	q！ 强制退出（放弃保存）


### 硬盘等操作

fdisk新建、修改及删除磁盘的分区表信息

|参数|	作用|
|-----|-----|
|m|	查看全部可用的参数|
|n|添加新的分区|
|d|	删除某个分区信息|
|l|	列出所有可用的分区类型|
|t|	改变某个分区的类型|
|p|	查看分区表信息|
|w|	保存并退出|
|q|	不保存直接退出|






## 用户身份与文件权限

```
    管理员UID为0：系统的管理员用户。
    系统用户UID为1～999：Linux系统为了避免因某个服务程序出现漏洞而被黑客提权至整台服务器，默认服务程序会由独立的系统用户负责运行，进而有效控制被破坏范围。
    普通用户UID从1000开始：是由管理员创建的用于日常工作的用户。
```

### 用户相关的命令

查看用户信息
>id hitcrt

创建新的用户账户

>useradd [参数] 用户名

|参数|作用|
|---|-------|
|-d|指定用户的家目录（默认为/home/username）|
|-e|账户的到期时间，格式为YYYY-MM-DD|
|-u|指定该用户的默认UID|
|-g|指定一个初始的用户基本组（必须已存在）|
|-G|指定一个或多个扩展用户组|
|-N|不创建与用户同名的基本用户组|
|-s|指定该用户的默认Shell解释器|


创建新的用户组

>groupadd [参数] 群组名

修改用户的属性，英文全称为“user modify”

>usermod [参数] 用户名

|参数|作用|
|----|-----|
|-c|填写用户账户的备注信息|
|-d -m|参数-m与参数-d连用，可重新指定用户的家目录并自动把旧的数据转移过去|
|-e|账户的到期时间，格式为YYYY-MM-DD|
|-g|变更所属用户组|
|-G|变更扩展用户组|
|-L|锁定用户禁止其登录系统|
|-U|解锁用户，允许其登录系统|
|-s|变更默认终端|
|-u|修改用户的UID|


修改用户的密码、过期时间等信息

>passwd [参数] 用户名


|参数|作用|
|-----|-----|
|-l|锁定用户，禁止其登录|
|-u|解除锁定，允许用户登录|
|--stdin|允许通过标准输入修改用户密码，如echo "NewPassWord" | passwd --stdin Username|
|-d|使该用户可用空密码登录系统|
|-e|强制用户在下次登录时修改密码|
|-S|显示用户的密码是否被锁定，以及密码所采用的加密算法名称|


userdel命令用于删除已有的用户账户


### 文件权限与归属

可读（r）、可写（w）、可执行（x）

r、w、x，亦可分别用数字4、2、1来表示

权限为7，则代表可读、可写、可执行（4+2+1）；若权限为6，则代表可读、可写（4+2）

常见的文件类型包括普通文件（-）、目录文件（d）、链接文件（l）、管道文件（p）、块设备文件（b）以及字符设备文件（c）

### 三种特殊权限

- SUID

	能够让二进制程序的执行者临时拥有所有者的权限（仅对拥有执行权限的二进制程序有效）
	x改变成s就意味着该文件被赋予了SUID权限
	原先权限位上没有x执行权限，那么被赋予特殊权限后将变成大写的S
	
- SGID
	
	当对二进制程序进行设置时，能够让执行者临时获取文件所属组的权限
	当对目录进行设置时，则是让目录内新创建的文件自动继承该目录原有用户组的名称
	
	
- SBIT
	可确保用户只能删除自己的文件，而不能删除其他用户的文件
	
	
### su命令与sudo服务

su命令可以解决切换用户身份的需求，使得当前用户在不退出登录的情况下，顺畅地切换到其他用户